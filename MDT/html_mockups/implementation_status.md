# MDT多端系统原型 - 功能实现状态对照表

本文档基于 PRD (产品需求文档) 和 UIDD (UI交互设计文档)，对照当前 `html_mockups` 目录下的实现情况，总结已实现功能与待开发/遗漏的功能点。

## 1. 总体进度概览

| 模块                 | 子模块            | 状态          | 备注                              |
| :------------------- | :---------------- | :------------ | :-------------------------------- |
| **公共/基础**  | 统一登录/入口     | ✅ 已实现     | `index.html` 实现了角色分流     |
|                      | 电子签名采集      | ✅ 已实现     | 已实现签名画板组件及交互          |
| **会诊助理端** | 任务列表          | ⚠️ 部分实现 | 缺少高级筛选、分页                |
|                      | 新增/编辑任务     | ✅ 已实现     | task_create.html 已完成及相关逻辑  |
|                      | 会诊详情 (全流程) | ✅ 基本实现   | 核心流程已跑通，缺少高级交互细节  |
|                      | 专家库管理        | ❌ 未实现     | 注册审核、类型管理页面缺失        |
| **专家工作台** | 工作台首页        | ✅ 已实现     | 看板视图结构完整                  |
|                      | 专家诊室          | ⚠️ 部分实现 | Copilot功能可用，缺少部分辅助视图 |

---

## 2. 详细功能对比

### 2.1 会诊助理端 (Assistant)

#### 2.1.1 任务管理

* **已实现**：
  * [X] 待会诊/已会诊/超期 状态标签切换（模拟）。
  * [X] 宽卡片布局，展示时间、患者信息、专家响应概览。
  * [X] 取消任务的二次确认（Alert弹窗）。
* **未实现/待完善**：
  * [ ] **新增/编辑任务页面**：目前点击“修改”无实际跳转页面（PRD 4.1.4）。
  * [ ] **筛选功能**：顶部的搜索框、日期筛选器仅有静态展示，无交互逻辑。
  * [ ] **专家响应进度可视化**：UIDD设计中的“Hover展示详细邀请名单”气泡未实现。

#### 2.1.2 会诊详情页 (核心)

* **已实现**：
  * [X] **分步解锁机制**：Tab 1-5 的状态流转（准备 -> 问诊 -> 文书 -> 报告）。
  * [X] **Tab 1 会诊前文书**：基本信息展示、虚拟AI专家意见卡片。
  * [X] **Tab 2 专家问诊**：录音状态模拟、ASR文字流模拟、对话卡片列表。
  * [X] **Tab 3 会诊后文书**：表单编辑界面，AI生成内容标识。
  * [X] **Tab 5 会诊报告**：报告预览生成、基本布局。
* **未实现/待完善**：
  * [ ] **Tab 2 交互细节**：
    * 缺少声纹波形动画（UIDD 4.3）。
    * 对话卡片缺少“编辑”功能的具体实现（目前是静态展示）。
  * [ ] **Tab 3 高级功能**：
    * **字段隐藏**：缺少 UIDD 4.4 定义的选填项“隐藏/显示 (👁️)”交互。
    * **对照模式**：缺少左侧显示问诊记录、右侧编辑文书的**分栏对照视图**。
  * [ ] **Tab 4 专家意见管理**：
    * **主持人控场**：缺少助理点击专家卡片分配麦克风（“发言中”状态切换）的交互逻辑（PRD 4.3.3）。
  * [ ] **Tab 5 报告归档**：
    * **核心专家指定**：缺少“结束会诊”时弹出指定核心专家的弹窗（PRD 3.1）。
    * **签名墙交互**：缺少催签（一键提醒）功能。

#### 2.1.3 专家库/系统管理

* **已实现**：
  * [x] **专家注册审核列表**（PRD 4.2.1）。
  * [x] **专家类型/标签管理**（PRD 4.2.2）。

### 2.2 专家端 (Expert)

#### 2.2.1 工作台

* **已实现**：
  * [X] 三栏布局（邀请、由我会诊、历史）。
  * [X] 接受/拒绝邀请的基础交互（Confirm/Prompt）。
* **未实现/待完善**：
  * [ ] **拒绝理由选择**：UIDD 3.1.3 建议的拒绝理由选择/填写弹窗。
  * [ ] **电子签名设置**：缺少引导专家进行首次签名采集的入口和界面（Canvas画板）。

#### 2.2.2 专家诊室

* **已实现**：
  * [X] **Tab 权限控制**：正确隐藏了“专家问诊”Tab。
  * [X] **AI Copilot (我的意见)**：右侧AI建议卡片，点击 `+` 号自动填充到左侧输入框。
* **未实现/待完善**：
  * [ ] **查看他人意见**：UIDD 5.3.1 提到的“参考其他专家意见”折叠面板/侧边栏。
  * [ ] **实时同步提示**：UIDD 6.1 描述的当助理切换阶段时的倒计时 Toast 提示（目前只有 Alert）。

---

## 3. 视觉与交互细节差异 (Gap Analysis)

1. **加载与占位**：
   * 目前所有数据均为硬编码 (`const caseData`)，缺乏数据加载时的 Loading 骨架屏状态。
2. **响应式布局**：
   * CSS 中虽然有 Grid 布局，但针对 iPad 横竖屏的特定适配（如 UIDD 6.3 提到的导航折叠、分栏比例调整）尚未精细化实现。
3. **动画效果**：
   * 缺少录音时的声纹波动动画。
   * 缺少 Tab 切换时的平滑过渡效果。
4. **异常处理UI**：
   * 缺少网络中断、服务异常时的顶部通告栏（Toast/Banner）。

## 4. 后续开发建议

1. **补全核心缺失页面**：优先实现 `task_create.html` (新增任务) 和 `expert_register.html` (含签名画板)。
2. **增强 Tab 3 交互**：在 `assistant_detail.html` 中实现左右分栏对照模式，并添加 JS 逻辑处理字段隐藏。
3. **完善专家控场逻辑**：在 `assistant_detail.html` 的 Tab 4 中增加点击专家头像切换“发言中”状态的逻辑。
4. **引入 Canvas**：实现一个简单的签名画板组件。
